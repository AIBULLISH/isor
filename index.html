<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!-- Safer viewport for notches -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>ISO Router — Programmable Liquidity for the ISO 20022 Era ($ISOR)</title>
    <meta name="description" content="ISO Router is an ISO 20022–aware smart liquidity router on BNB. Turn structured payment intent into the fastest, cheapest settlement route. Stake and govern with $ISOR." />
    <meta name="theme-color" content="#6b4df5" />

    <!-- Color scheme + PWA bar colors -->
    <meta name="color-scheme" content="dark light">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0d0f13">

    <!-- Open Graph -->
    <meta property="og:title" content="ISO Router — Programmable Liquidity for the ISO 20022 Era ($ISOR)" />
    <meta property="og:description" content="Turn ISO 20022 messages into the optimal settlement path across BNB liquidity, stablecoins, and compliant off-ramps. Stake to route and earn with $ISOR." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://isorouter.com/ms-icon-310x310.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ISO Router — Programmable Liquidity for the ISO 20022 Era ($ISOR)" />
    <meta name="twitter:description" content="ISO-aware, purpose-coded routing on BNB. Stake to route and earn with $ISOR." />
    <meta name="twitter:image" content="https://isorouter.com/ms-icon-310x310.png" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <style>
        :root {
            --bg: #0d0f13;
            --bg-2: #0f1117;
            --text: #e6e8ee;
            --muted: #a9afc3;
            --brand: #6b4df5;         /* Primary */
            --brand-2: #a86bff;       /* Accent */
            --brand-3: #00d4ff;       /* Accent 2 */
            --ok: #4ade80;
            --warn: #f59e0b;
            --error: #ef4444;
            --card: rgba(255,255,255,0.06);
            --glass: rgba(255,255,255,0.08);
            --border: rgba(255,255,255,0.14);
            --shadow: 0 10px 30px rgba(0,0,0,0.35);
            --glow: 0 0 30px rgba(107,77,245,0.35), 0 0 60px rgba(0,212,255,0.18);

            --radius: 14px;
            --radius-sm: 10px;
            --radius-lg: 22px;
            --maxw: 1180px;

            /* iOS notch safe areas */
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        [data-theme="light"] {
            --bg: #f7f7fb;
            --bg-2: #ffffff;
            --text: #1b1f2a;
            --muted: #4a5568;
            --brand: #5b3df0;
            --brand-2: #8f5cff;
            --brand-3: #06b6d4;
            --ok: #16a34a;
            --warn: #b45309;
            --error: #b91c1c;
            --card: rgba(0,0,0,0.04);
            --glass: rgba(255,255,255,0.75);
            --border: rgba(0,0,0,0.12);
            --shadow: 0 12px 28px rgba(0,0,0,0.12);
            --glow: 0 0 30px rgba(91,61,240,0.25), 0 0 60px rgba(6,182,212,0.16);
        }

        * { box-sizing: border-box; }
        html, body { height: 100%; scroll-behavior: smooth; }
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            color: var(--text);
            background:
                    radial-gradient(1200px 800px at 120% -10%, #6b4df524, transparent 40%),
                    radial-gradient(900px 650px at -20% 0%, #00d4ff1c, transparent 50%),
                    linear-gradient(180deg, var(--bg), var(--bg-2) 30%, var(--bg) 100%);
            background-attachment: fixed;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%; /* iOS text zoom guard */
        }

        img, video, canvas { max-width: 100%; height: auto; }

        /* Subtle animated aurora */
        .aurora {
            position: fixed; inset: -20% -10% auto -10%;
            width: 120%; height: 60vh; z-index: -1; pointer-events: none; filter: blur(60px) saturate(120%);
            background:
                    radial-gradient(40% 60% at 20% 40%, rgba(168,107,255,0.30), transparent 60%),
                    radial-gradient(45% 60% at 60% 30%, rgba(0,212,255,0.25), transparent 60%),
                    radial-gradient(35% 50% at 80% 70%, rgba(107,77,245,0.28), transparent 60%);
            animation: drift 18s ease-in-out infinite alternate;
            opacity: .75;
        }
        @keyframes drift { 0% { transform: translateY(-10px) translateX(-10px) scale(1.05); } 100% { transform: translateY(10px) translateX(10px) scale(1.1); } }

        a { color: inherit; text-decoration: none; }
        .container { max-width: var(--maxw); margin: 0 auto; padding: 0 20px; }

        /* === NETWORK BACKGROUND === */
        #netCanvas{ position: fixed; inset: 0; z-index: -2; pointer-events: none; }

        /* Header */
        header {
            position: sticky; top: 0; z-index: 50;
            backdrop-filter: saturate(140%) blur(8px);
            background: linear-gradient(180deg, rgba(0,0,0,0.45), transparent);
            border-bottom: 1px solid var(--border);
            padding-top: max(0px, var(--safe-top));
        }
        .nav {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center; height: 72px; gap: 12px;
        }
        .brand {
            display: inline-flex; align-items: center; gap: 12px; font-weight: 800; letter-spacing: 0.3px;
        }
        .brand .logo {
            position: relative; display: grid; place-items: center; width: 36px; height: 36px; border-radius: 9px;
            background: conic-gradient(from 180deg at 50% 50%, #6b4df5, #00d4ff, #a86bff, #6b4df5);
            box-shadow: 0 8px 26px rgba(107,77,245,0.4), inset 0 0 20px rgba(255,255,255,0.25);
            overflow: hidden;
        }
        .brand .logo img { width: 20px; height: 20px; }
        .brand .logo::after {
            content:""; position:absolute; inset:0;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.35), transparent);
            transform: translateX(-100%); animation: shine 3.5s linear infinite;
        }
        @keyframes shine { to { transform: translateX(100%); } }

        nav ul { display: flex; gap: 22px; list-style: none; margin: 0; padding: 0; }
        nav a { color: var(--muted); font-weight: 600; font-size: 14px; }
        nav a:hover, nav a:focus { color: var(--text); text-shadow: var(--glow); }

        .actions { display: inline-flex; gap: 12px; align-items: center; justify-self: end; }
        .btn, .theme-toggle, .nav-toggle {
            --h: 46px;
            height: var(--h); padding: 0 18px; border: 1px solid var(--border); border-radius: 999px;
            display: inline-flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: 0.2px;
            background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.02));
            box-shadow: var(--shadow);
            transition: transform .18s ease, background .25s ease, border-color .25s ease, box-shadow .25s ease;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .btn:hover, .theme-toggle:hover, .nav-toggle:hover { transform: translateY(-2px); border-color: #ffffff40; box-shadow: var(--glow); }
        .btn-primary {
            background: linear-gradient(90deg, var(--brand), var(--brand-2), var(--brand-3));
            border: none; color: white;
            box-shadow: 0 14px 30px rgba(107,77,245,0.45);
            background-size: 200% 100%; animation: sweep 4s ease infinite;
        }
        @keyframes sweep { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .btn-outline { background: transparent; }
        .pill { font-size: 12px; font-weight: 700; padding: 8px 12px; border-radius: 999px; border: 1px solid var(--border); color: var(--muted); background: rgba(255,255,255,0.04); }

        /* Mobile menu */
        .nav-toggle { display: none; aspect-ratio: 1/1; padding: 0 12px; }
        .nav-toggle svg { width: 22px; height: 22px; }
        .mobile-nav {
            display: none; position: fixed; inset: 72px 0 auto 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px) saturate(140%);
            border-bottom: 1px solid var(--border); padding: 12px 16px; z-index: 49;
        }
        .mobile-nav.open { display: block; }
        .mobile-nav ul { list-style: none; margin: 0; padding: 8px 0; display: grid; gap: 6px; }
        .mobile-nav a { display: block; padding: 14px 12px; border-radius: 10px; color: var(--text); background: var(--card); border: 1px solid var(--border); }

        /* Hero */
        .hero { padding: 80px 0 40px; position: relative; }
        .headline {
            display: inline-block; font-size: clamp(32px, 6vw, 60px); line-height: 1.08; font-weight: 800; letter-spacing: -0.02em;
            background: linear-gradient(90deg, gray, #cfd2ff 60%, #9cdfff);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            text-shadow: 0 2px 30px rgba(107,77,245,0.22);
        }
        .sub { margin-top: 16px; color: var(--muted); max-width: 820px; font-size: clamp(16px, 2.4vw, 18px); line-height: 1.6; }
        .cta-row { display: flex; gap: 12px; margin-top: 26px; flex-wrap: wrap; }

        .status { display: inline-flex; align-items: center; gap: 8px; margin-top: 20px; }
        .status .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--ok); box-shadow: 0 0 0 6px rgba(74,222,128,0.15); }

        .hero-grid { display: grid; grid-template-columns: 1.3fr 1fr; gap: 24px; align-items: center; margin-top: 42px; }
        .card {
            background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
            padding: clamp(16px, 2.5vw, 22px); box-shadow: var(--shadow);
            overflow: hidden;
        }
        .glass {
            background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
            border: 1px solid var(--border); border-radius: var(--radius-lg);
            padding: clamp(16px, 2.5vw, 22px); box-shadow: var(--shadow); position: relative;
        }

        .ring { position: relative; isolation: isolate; }
        .ring::before {
            content: ""; position: absolute; inset: -1px; border-radius: inherit; z-index: -1;
            padding: 1px; background: linear-gradient(135deg, var(--brand), var(--brand-3), var(--brand-2));
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude; animation: hue 7s linear infinite;
        }
        @keyframes hue { 0%{filter:hue-rotate(0deg)} 100%{filter:hue-rotate(360deg)} }

        /* Code blocks */
        pre.code { margin: 0; padding: 14px; border-radius: 12px; background: rgba(0,0,0,0.35); border: 1px solid var(--border); overflow: auto; -webkit-overflow-scrolling: touch; }
        pre.code code { font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 13px; white-space: pre; word-break: break-word; }

        /* Countdown */
        .countdown { margin: 22px 0 10px; padding: 20px; border-radius: 20px; display: grid; gap: 14px; box-shadow: var(--glow); }
        .cd-title { font-weight: 800; letter-spacing: .12em; text-transform: uppercase; font-size: 12px; color: #cbd5f9; }
        .cd-grid { display: grid; grid-template-columns: repeat(4, minmax(90px, 1fr)); gap: 10px; align-items: center; text-align: center; }
        .cd-box { background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 16px; padding: 14px 10px; backdrop-filter: blur(8px); position: relative; overflow: hidden; }
        .cd-num { font-size: clamp(26px, 6vw, 48px); font-weight: 800; letter-spacing: -0.02em; line-height: 1; display: block; transition: transform .2s ease; }
        .cd-label { font-size: 12px; color: var(--muted); margin-top: 6px; text-transform: uppercase; letter-spacing: .14em; }
        .cd-progress { height: 8px; background: rgba(255,255,255,0.06); border: 1px solid var(--border); border-radius: 999px; overflow: hidden; }
        .cd-progress > div { height: 100%; width: 0%; background: linear-gradient(90deg, var(--brand), var(--brand-2), var(--brand-3)); transition: width .6s ease; }
        .cd-date { font-size: 12px; color: var(--muted); }

        /* Sections */
        section { padding: clamp(56px, 8vw, 80px) 0; position: relative; }
        h2 { font-size: clamp(24px, 3.3vw, 36px); margin: 0 0 14px 0; letter-spacing: -0.01em; text-shadow: var(--glow); }
        p { color: var(--muted); line-height: 1.7; }

        .grid-3 { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 18px; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 18px; }

        .feature { padding: 20px; border-radius: var(--radius); border: 1px solid var(--border); background: var(--card); transition: transform .25s ease, box-shadow .25s ease; }
        .feature:hover { transform: translateY(-4px); box-shadow: var(--glow); }
        .feature h3 { margin: 6px 0 8px; font-size: 18px; }
        .kicker { color: var(--brand-2); font-weight: 800; font-size: 12px; letter-spacing: 0.16em; text-transform: uppercase; }

        .badge { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px; background: linear-gradient(90deg, #141827, #0f121d); border: 1px solid var(--border); color: #cbd5f9; font-size: 12px; font-weight: 700; box-shadow: var(--shadow); }

        .sep { position: relative; height: 80px; margin-top: -40px; margin-bottom: -40px; background: linear-gradient(180deg, transparent, rgba(255,255,255,0.04), transparent); mask: radial-gradient(60% 80% at 50% 0%, #000 40%, transparent 60%); }

        /* Timeline (unused here but retained) */
        .timeline { position: relative; padding-left: 28px; }
        .timeline::before { content: ""; position: absolute; left: 10px; top: 10px; bottom: 10px; width: 2px; background: linear-gradient(180deg, var(--brand), transparent); }
        .milestone { position: relative; margin: 18px 0; }
        .milestone::before { content: ""; position: absolute; left: -2px; top: 6px; width: 14px; height: 14px; border-radius: 50%; background: linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow: 0 0 0 6px rgba(107,77,245,0.18); }

        /* FAQ */
        .faq { display: grid; gap: 10px; }
        .accordion { border: 1px solid var(--border); border-radius: var(--radius); background: var(--card); overflow: hidden; transition: box-shadow .25s ease; }
        .accordion:hover { box-shadow: var(--glow); }
        .acc-head { display: flex; justify-content: space-between; align-items: center; padding: 18px 20px; cursor: pointer; font-weight: 700; }
        .acc-body { padding: 0 20px 18px 20px; display: none; }
        .accordion.open .acc-body { display: block; }
        .accordion.open .chev { transform: rotate(180deg); }
        .chev { transition: transform .2s ease; }

        /* Footer */
        footer { border-top: 1px solid var(--border); padding: 40px 0; color: var(--muted); padding-bottom: max(40px, var(--safe-bottom)); }
        .footgrid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 16px; align-items: center; }

        /* Utilities */
        .muted { color: var(--muted); }
        .center { text-align: center; }
        .spacer-s { height: 14px; }
        .spacer { height: 24px; }
        .spacer-l { height: 42px; }
        .mono { font-family: "JetBrains Mono", monospace; }
        .tag { font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); color: var(--muted); }
        .inline-list { display: flex; gap: 10px; flex-wrap: wrap; }

        /* Anchor offset so sticky header doesn't cover targets */
        :where(section, [id]) { scroll-margin-top: 84px; }

        /* Solid focus states */
        :focus-visible { outline: 2px solid var(--brand-3); outline-offset: 2px; border-radius: 10px; }

        /* Prevent grid children from overflowing on tiny screens */
        .grid-2 > *, .grid-3 > *, .hero-grid > * { min-width: 0; }

        /* Responsive */
        @media (max-width: 1200px) {
            .container { padding: 0 18px; }
        }
        @media (max-width: 1024px) {
            .nav { grid-template-columns: auto auto 1fr; }
            nav ul { display: none; }
            .nav-toggle { display: inline-flex; justify-self: start; }
            .actions { justify-self: end; }
            .hero-grid { grid-template-columns: 1fr; }
            .grid-3 { grid-template-columns: 1fr 1fr; }
            .footgrid { grid-template-columns: 1fr; }
            .cd-grid { grid-template-columns: repeat(4, 1fr); }
        }
        @media (max-width: 768px) {
            .badge { width: 100%; justify-content: center; }
            header { background: linear-gradient(180deg, rgba(0,0,0,0.65), transparent); }
            .hero { padding-top: 64px; }
            .cd-grid { grid-template-columns: repeat(2, 1fr); }
            .grid-3, .grid-2 { grid-template-columns: 1fr; }
            .actions .btn, .actions .theme-toggle { --h: 42px; }
        }
        @media (max-width: 480px) {
            .container { padding: 0 14px; }
            .headline { word-break: break-word; }
            .btn, .theme-toggle, .nav-toggle { --h: 40px; padding: 0 14px; }
            .inline-list { gap: 8px; }
        }
        @media (max-width: 360px) {
            .headline { font-size: clamp(28px, 9vw, 36px); }
            .btn, .theme-toggle, .nav-toggle { --h: 38px; padding: 0 12px; }
        }

        /* Reduce heavy motion on user preference */
        @media (prefers-reduced-motion: reduce) {
            .aurora { animation: none; }
        }

        /* Reveal animations */
        .reveal { opacity: 0; transform: translateY(16px); transition: opacity .5s ease, transform .5s ease; }
        .reveal.in-view { opacity: 1; transform: translateY(0); }

        /* Canvas (confetti) layer */
        #fxCanvas { position: fixed; inset: 0; pointer-events: none; z-index: 99; }
    </style>
</head>

<body>
<!-- Background canvas layers -->
<canvas id="netCanvas" aria-hidden="true"></canvas>
<div class="aurora" aria-hidden="true"></div>

<!-- Header -->
<header>
    <div class="container nav">
        <!-- Mobile menu button -->
        <button class="nav-toggle" id="navToggle" aria-label="Open menu" aria-expanded="false" aria-controls="mobileNav">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>

        <a class="brand" href="#top">
          <div class="logo" aria-hidden="true">
    <img src="mylogo.jpg" alt="Logo" loading="lazy" decoding="async">
</div>


            <div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <span aria-label="Project name">ISO Router</span>
                    <span class="tag mono">$ISOR</span>
                </div>
                <div class="muted" style="font-size:12px;">Programmable liquidity for the ISO 20022 era</div>
            </div>
        </a>

        <nav aria-label="Primary" class="desk-nav" style="justify-self:center;">
            <ul>
                <li><a target="_blank" href="https://stake.smithii.io/isorouter">Staking</a></li>
                <li><a target="_blank" href="https://iso-router.gitbook.io/iso-router-docs">Whitepaper</a></li>
                <li><a href="#product">Product</a></li>
                <li><a href="#token">Token</a></li>
                <li><a href="#build">Build</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </nav>

        <div class="actions">
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <svg id="iconMoon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2"/>
                </svg>
            </button>
            <span 
  class="btn btn-primary" 
  style="cursor: pointer; opacity: 1;" 
  onclick="window.open('https://four.meme/#/launchpad/<DEIN_TOKEN_CONTRACT>', '_blank')">
  Buy $ISOR
</span>

        </div>
    </div>

    <!-- Mobile nav drawer -->
    <nav id="mobileNav" class="mobile-nav" aria-label="Mobile">
        <div class="container">
            <ul>
                <li><a target="_blank" href="https://stake.smithii.io/isorouter">Staking</a></li>
                <li><a href="#why">Why now</a></li>
                <li><a href="#product">Product</a></li>
                <li><a href="#token">Token</a></li>
                <li><a href="#build">Build</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
            <div class="inline-list" style="margin-top:8px;">
                <a class="btn btn-outline" target="_blank" href="https://t.me/isorouterchat">Telegram</a>
                <a class="btn btn-outline" target="_blank" href="https://x.com/isorouter">X/Twitter</a>
            </div>
        </div>
    </nav>
</header>

<!-- Main content (helps accessibility when mobile drawer is open) -->
<main id="top">
    <!-- Hero -->
    <section class="hero">
        <div class="container">
            <span class="badge">ISO-aware · BNB speed · Structured receipts</span>

            <!-- PROMINENT COUNTDOWN -->
            <div class="countdown glass ring reveal" id="countdown" role="timer" aria-live="polite" aria-label="Countdown to ISO 20022 launch on November 22, 2025">
                <div class="cd-title">Countdown to ISO 20022 Launch · 22 Nov 2025 (00:00 CET)</div>
                <div class="cd-grid">
                    <div class="cd-box"><span class="cd-num" id="cd-days">00</span><div class="cd-label">Days</div></div>
                    <div class="cd-box"><span class="cd-num" id="cd-hours">00</span><div class="cd-label">Hours</div></div>
                    <div class="cd-box"><span class="cd-num" id="cd-mins">00</span><div class="cd-label">Minutes</div></div>
                    <div class="cd-box"><span class="cd-num" id="cd-secs">00</span><div class="cd-label">Seconds</div></div>
                </div>
                <div class="cd-progress" aria-hidden="true"><div id="cd-bar"></div></div>
                <div class="cd-date">We’re building toward a standards-native payments future.</div>
            </div>

            <h1 class="headline">Turn ISO 20022 intent into the fastest, cheapest settlement path—automatically.</h1>

            <p class="sub">
                ISO Router is a BNB-native, ISO-aware smart order router. It reads rich payment intent
                (amount, currency, purpose code, end-to-end ID) and executes the optimal path across on-chain
                liquidity, stablecoins, and compliant off-ramps. Stake and govern the network with
                <span class="mono">$ISOR</span>.
            </p>

            <div class="cta-row">
               <span 
  class="btn btn-primary" 
  style="cursor: pointer; opacity: 1;" 
  onclick="window.open('https://four.meme/#/launchpad/<DEIN_TOKEN_CONTRACT>', '_blank')">
  Buy $ISOR
</span>
 
                <a class="btn" target="_blank" href="https://iso-router.gitbook.io/iso-router-docs">Whitepaper</a>
            </div>

            <div class="status">
                <span class="dot" aria-hidden="true"></span>
                <span class="muted">ISO 20022 launch window · 22 Nov 2025</span>
            </div>

            <div class="hero-grid">
                <div class="glass ring reveal" role="region" aria-label="What you'll get">
                    <div class="kicker">What you’ll get</div>
                    <div class="spacer-s"></div>
                    <div class="grid-3">
                        <div class="feature">
                            <h3>Purpose-aware routing</h3>
                            <p>Purpose codes influence path selection and policy checks—payroll ≠ marketplace payout.</p>
                        </div>
                        <div class="feature">
                            <h3>Fee-inclusive quotes</h3>
                            <p>One number. Swap slippage, bridge and off-ramp costs included—no surprises.</p>
                        </div>
                        <div class="feature">
                            <h3>Structured receipts</h3>
                            <p>On-chain receipts map back to ISO fields for instant ERP reconciliation.</p>
                        </div>
                    </div>
                </div>

                <div class="card ring reveal" role="region" aria-label="API example">
                    <div class="kicker">API in 30 seconds</div>
                    <div class="spacer-s"></div>
                    <pre class="code" aria-label="Code sample"><code>{
  "POST /quote": {
    "amount": "125000.00",
    "ccy": "EUR",
    "purposeCode": "GDDS",
    "endToEndId": "E2E-48F92C5",
    "allowedRails": ["BNB_USDC", "PARTNER_FIAT"],
    "policy": {"maxLatencyMs": 2500}
  }
}
// → returns signed, fee-inclusive quote + expiry
// → POST /settle with auth to execute
</code></pre>
                    <div class="spacer-s"></div>
                    <div class="inline-list">
                        <span class="tag">SDK: <span class="mono">@isorouter/sdk</span></span>
                        <span class="tag">Receipts: <span class="mono">ISO-mapped</span></span>
                        <span class="tag">Explainer: <span class="mono">/docs</span></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Why now -->
    <section id="why">
        <div class="container">
            <h2 class="reveal">Why now</h2>
            <div class="grid-3">
                <div class="feature reveal">
                    <div class="kicker">Standardization</div>
                    <h3>ISO 20022 unlocks structure</h3>
                    <p>Purpose codes, creditor references, and structured party info are finally machine-readable—making programmable routing possible.</p>
                </div>
                <div class="feature reveal">
                    <div class="kicker">Throughput</div>
                    <h3>BNB makes it real-time</h3>
                    <p>High TPS and low fees let the router evaluate many paths and settle in a blink, even during volatile markets.</p>
                </div>
                <div class="feature reveal">
                    <div class="kicker">Demand</div>
                    <h3>Enterprises want choice</h3>
                    <p>Pick the best rail per transfer—USDC on BNB, a partner off-ramp, or a compliant fiat corridor—based on cost, speed, and policy.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Product -->
    <section id="product">
        <div class="container">
            <h2 class="reveal">What ISO Router does</h2>
            <div class="grid-2">
                <div class="card reveal ring">
                    <ol>
                        <li><strong>Parse intent:</strong> read ISO-aligned fields (amount, CCY, purpose/category purpose, end-to-end ID, creditor ref).</li>
                        <li><strong>Route selection:</strong> score paths by total landed cost, latency, reliability, and compliance policy.</li>
                        <li><strong>Atomic execution:</strong> swap, bridge (where applicable), settle, and emit proofs via BNB programs.</li>
                        <li><strong>Structured receipts:</strong> on-chain receipt with references back to the original ISO message.</li>
                    </ol>
                </div>
                <div class="card reveal ring">
                    <div class="kicker">Key innovations</div>
                    <div class="spacer-s"></div>
                    <ul>
                        <li><strong>Purpose-aware routing</strong> impacts path & policy.</li>
                        <li><strong>Route auctions</strong>—best quote wins, not just fastest finger.</li>
                        <li><strong>ZK compliance attestations</strong> prove checks without exposing PII.</li>
                        <li><strong>Failure-aware fallbacks</strong> re-quote and fail over mid-flight if needed.</li>
                        <li><strong>ISO receipts & webhooks</strong> for straight-through processing.</li>
                    </ul>
                </div>
            </div>

            <div class="spacer"></div>

            <div class="grid-3">
                <div class="feature reveal">
                    <div class="kicker">For</div>
                    <h3>Fintechs & PSPs</h3>
                    <p>Add “ISO-native crypto settlement” to your product with one API.</p>
                </div>
                <div class="feature reveal">
                    <div class="kicker">For</div>
                    <h3>Treasury teams</h3>
                    <p>Move supplier payments and payouts with rich remittance data preserved end-to-end.</p>
                </div>
                <div class="feature reveal">
                    <div class="kicker">For</div>
                    <h3>Exchanges & wallets</h3>
                    <p>Embed compliance-aware cash-out paths as a service—delight users, reduce support tickets.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Token Utility -->
    <section id="token">
        <div class="container">
            <h2 class="reveal">$ISOR — utility, not hype</h2>
            <div class="grid-3">
                <div class="feature reveal">
                    <h3>Stake-to-route</h3>
                    <p>Operators stake <span class="mono">$ISOR</span> to register routing nodes. Winning routes earn <strong>routing fees</strong>; misbehavior is penalized via slashing.</p>
                </div>
                <div class="feature reveal">
                    <h3>Priority & discounts</h3>
                    <p>Staked users get <strong>priority quoting</strong> and <strong>fee discounts</strong> across app and API.</p>
                </div>
                <div class="feature reveal">
                    <h3>Govern upgrades</h3>
                    <p>Token holders propose/vote on scoring weights, corridors, fee caps, and treasury grants.</p>
                </div>
            </div>

            <div class="spacer"></div>

            <div class="grid-2">
                <div class="card reveal ring">
                    <div class="kicker">Token economy at a glance</div>
                    <div class="spacer-s"></div>
                    <ul>
                        <li><strong>Name:</strong> <span class="mono">ISO Router Token</span></li>
                        <li><strong>Ticker:</strong> <span class="mono">$ISOR</span></li>
                        <li><strong>Type:</strong> Utility / work token (BNB Token-2022)</li>
                        <li><strong>Fees:</strong> Routing fees collected in transacting currency; protocol take-rate distributed to active, honest node operators; small share to treasury.</li>
                        <li><strong>Slashing:</strong> For incorrect quotes, failed settlements above tolerance, or policy violations.</li>
                        <li><strong>Developer credits:</strong> Burn <span class="mono">$ISOR</span> for API credits & premium analytics.</li>
                    </ul>
                    <p class="muted"><em>Parameters, caps, and allocations finalized by governance and published pre-TGE.</em></p>
                </div>

                <div class="card reveal ring" id="buy">
                    <div class="kicker">Buy $ISOR</div>
                    <div class="spacer-s"></div>
                    <p>Participate in—and help steer—the network that turns ISO-structured payments into optimal settlement.</p>
                    <div class="inline-list">
                        <span class="tag">Chain: BNB</span>
                        <span class="tag">Ticker: <span class="mono">$ISOR</span></span>
                        <span class="tag">Standard: Token-2022</span>
                    </div>
                    <div class="spacer"></div>
                    <div class="grid-2">
                    <span 
  class="btn btn-primary" 
  style="cursor: pointer; opacity: 1;" 
  onclick="window.open('https://four.meme/#/launchpad/<DEIN_TOKEN_CONTRACT>', '_blank')">
  Buy $ISOR
</span>
    
                    </div>
                    <div class="spacer-s"></div>
                    <p class="muted" style="font-size:12px;">Crypto assets are volatile and involve risk. Nothing here is financial, legal, or tax advice.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- How it works -->
    <section id="how">
        <div class="container">
            <h2 class="reveal">How routes are chosen</h2>
            <div class="grid-3">
                <div class="feature reveal">
                    <h3>Inputs</h3>
                    <p>Amount, currency, purpose code, allowed rails, counterparty proofs, and policy constraints.</p>
                </div>
                <div class="feature reveal">
                    <h3>Scoring</h3>
                    <p><em>price × reliability × latency × policy-fit</em> with risk-adjusted buffers to minimize re-quotes.</p>
                </div>
                <div class="feature reveal">
                    <h3>Execution & proofs</h3>
                    <p>Aggregator of BNB DEXs + stablecoin rails + partner off-ramps. On-chain receipts include ISO references & Merkle proofs.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Enterprise Features -->
    <section id="enterprise">
        <div class="container">
            <h2 class="reveal">ISO-native features for enterprises</h2>
            <div class="grid-2">
                <div class="card reveal ring">
                    <ul>
                        <li><strong>Structured remittance:</strong> purpose codes and creditor refs preserved end-to-end.</li>
                        <li><strong>Reconciliations:</strong> export ISO-mapped receipts to ERP via webhooks (SAP, Oracle, NetSuite).</li>
                        <li><strong>Returns & recalls:</strong> model return flows with ISO-like reason codes on-chain.</li>
                        <li><strong>LEI-attested counterparties:</strong> map LEIs to wallet addresses for safer B2B flows.</li>
                    </ul>
                </div>
                <div class="card reveal ring">
                    <div class="kicker">Trust & safety</div>
                    <div class="spacer-s"></div>
                    <ul>
                        <li><strong>Compliance-first:</strong> optional sanctions screening attestations; Travel Rule interfaces where required.</li>
                        <li><strong>ZK privacy:</strong> prove KYC/AML checks without exposing PII on-chain.</li>
                        <li><strong>Audits:</strong> contracts audited pre-mainnet; continuous bug bounties.</li>
                        <li><strong>Transparency:</strong> open metrics for route success, price improvement, and treasury spend.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Builders -->
    <section id="build">
        <div class="container">
            <h2 class="reveal">Run a node & build with us</h2>
            <div class="grid-2">
                <div class="card reveal ring">
                    <div class="kicker">For node operators</div>
                    <div class="spacer-s"></div>
                    <p><strong>Run a router, earn fees.</strong> Provide quotes, execute routes, submit proofs.</p>
                    <ul>
                        <li><strong>Requirements:</strong> <span class="mono">$ISOR</span> stake, uptime SLAs, risk engine, access to liquidity/rails.</li>
                        <li><strong>Incentives:</strong> dynamic rewards based on fill quality, price improvement, and reliability.</li>
                    </ul>
                    <strong>Current APR:</strong> ~300%
                    <div class="spacer-s"></div>
                    <ul>
                        <li><strong>Step 1:</strong> Open the Staking Dashboard</li>
                        <li><strong>Step 2:</strong> Connect your wallet</li>
                        <li><strong>Step 3:</strong> Enter the number of tokens you want to stake (min. 1,000,000 $ISOR)</li>
                        <li><strong>Step 4:</strong> Click on “Stake” and confirm it in your wallet</li>
                    </ul>
                    <div class="spacer-s"></div>
                     <a class="btn btn-primary" href="#app" id="app">Staking Dashboard (coming soon)</a>
               </div>
                <div class="card reveal ring" id="docs">
                    <div class="kicker">For developers</div>
                    <div class="spacer-s"></div>
                    <p><strong>Quick start:</strong></p>
                    <pre class="code"><code>npm i @isorouter/sdk

// Quote
const quote = await isorouter.quote({
  amount: "5000.00", ccy: "USD", purposeCode: "SALA",
  endToEndId: "E2E-8B3Z3", allowedRails: ["BNB_USDC"]
});

// Settle
await isorouter.settle({ quoteId: quote.id, signature });
</code></pre>
                    <div class="inline-list">
                        <span class="tag">REST + Webhooks</span>
                        <span class="tag">ISO Receipts</span>
                        <span class="tag">Sandbox</span>
                    </div>
                    <div class="spacer-s"></div>
                    <a class="btn btn-primary" href="#app" id="app">Open Sandbox (coming soon)</a>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- FAQ -->
    <section id="faq">
        <div class="container">
            <h2 class="reveal">FAQ</h2>
            <div class="faq">
                <div class="accordion reveal">
                    <div class="acc-head" role="button" tabindex="0" aria-expanded="false">
                        <span>Is $ISOR a security?</span>
                        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    </div>
                    <div class="acc-body">
                        <p><span class="mono">$ISOR</span> is a utility/work token for staking, access, and governance within ISO Router. It is not designed to represent equity or a claim on profits.</p>
                    </div>
                </div>

                <div class="accordion reveal">
                    <div class="acc-head" role="button" tabindex="0" aria-expanded="false">
                        <span>Do I need to hold $ISOR to use the router?</span>
                        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    </div>
                    <div class="acc-body">
                        <p>No. Users can pay fees in supported currencies; <span class="mono">$ISOR</span> provides discounts, priority, and governance rights.</p>
                    </div>
                </div>

                <div class="accordion reveal">
                    <div class="acc-head" role="button" tabindex="0" aria-expanded="false">
                        <span>Where do rewards come from?</span>
                        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    </div>
                    <div class="acc-body">
                        <p>Active node operators earn <strong>routing fees for performing work</strong>. There is no promise of passive income.</p>
                    </div>
                </div>

                <div class="accordion reveal">
                    <div class="acc-head" role="button" tabindex="0" aria-expanded="false">
                        <span>What about privacy?</span>
                        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    </div>
                    <div class="acc-body">
                        <p>PII stays off-chain. Optional ZK attestations prove checks were done without revealing raw data.</p>
                    </div>
                </div>

                <div class="accordion reveal">
                    <div class="acc-head" role="button" tabindex="0" aria-expanded="false">
                        <span>Which rails are supported?</span>
                        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                    </div>
                    <div class="acc-body">
                        <p>We start with BNB DEX liquidity and stablecoins; fiat corridors and other rails are added via governance and partnerships.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="sep" aria-hidden="true"></div>

    <!-- Risk -->
    <section id="risk">
        <div class="container">
            <div class="card reveal ring">
                <div class="kicker">Risk disclosure</div>
                <p>Crypto assets are volatile and involve risk, including loss of principal. <span class="mono">$ISOR</span> provides network utility and governance within ISO Router only. Nothing on this page is financial, legal, or tax advice. Availability of specific corridors/partners may vary by jurisdiction and compliance requirements.</p>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<footer>
    <div class="container footgrid">
        <div>
            <div class="brand">
                <div class="logo" aria-hidden="true">
                    <img src="favicon-32x32.png" alt="" loading="lazy" decoding="async">
                </div>
                <strong>ISO Router</strong>
                <span class="tag mono">$ISOR</span>
            </div>
            <div class="spacer-s"></div>
            <p class="muted">© <span id="y"></span> ISO Router. All rights reserved.</p>
        </div>
        <div style="justify-self:end;">
            <div class="inline-list" style="justify-content:flex-end;">
                <a class="btn btn-outline" target="_blank" href="https://t.me/isorouterchat">Telegram</a>
                <a class="btn btn-outline" target="_blank" href="https://x.com/isorouter">X/Twitter</a>
            </div>
        </div>
    </div>
</footer>

<!-- FX Canvas -->
<canvas id="fxCanvas" aria-hidden="true"></canvas>

<script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Theme toggle with persistence
    const themeToggle = document.getElementById('themeToggle');
    const saved = localStorage.getItem('theme');
    if (saved) document.documentElement.setAttribute('data-theme', saved);
    themeToggle.addEventListener('click', () => {
        const cur = document.documentElement.getAttribute('data-theme') || 'dark';
        const next = cur === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        if (window.net) window.net.colors = getNetColors();
    });

    // Mobile nav
    const navToggle = document.getElementById('navToggle');
    const mobileNav = document.getElementById('mobileNav');

    // Helper to inert background for screen readers when drawer open
    const pageMain = document.querySelector('main') || document.body;
    const setInert = (on) => {
        if (on) { pageMain.setAttribute('aria-hidden', 'true'); }
        else { pageMain.removeAttribute('aria-hidden'); }
    };

    const toggleDrawer = (open) => {
        mobileNav.classList.toggle('open', open);
        navToggle.setAttribute('aria-expanded', String(open));
        document.body.style.overflow = open ? 'hidden' : '';
        setInert(open);
    };

    navToggle.addEventListener('click', () => toggleDrawer(!mobileNav.classList.contains('open')));
    mobileNav.querySelectorAll('a').forEach(a => a.addEventListener('click', () => toggleDrawer(false)));

    // Close on ESC
    window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && mobileNav.classList.contains('open')) toggleDrawer(false);
    });

    // Reveal on scroll
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => {
            if (e.isIntersecting) { e.target.classList.add('in-view'); observer.unobserve(e.target); }
        });
    }, { threshold: 0.12 });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // Accordion
    document.querySelectorAll('.accordion .acc-head').forEach(head => {
        head.addEventListener('click', () => {
            const acc = head.parentElement;
            const open = acc.classList.contains('open');
            document.querySelectorAll('.accordion').forEach(a => a.classList.remove('open'));
            acc.classList.toggle('open', !open);
            head.setAttribute('aria-expanded', String(!open));
        });
        head.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); head.click(); }
        });
    });

    // Copy (contract address)
    function copyAddr() {
        const addr = "AcEUW3C94kNBDm5D1S9KLYT7aDXcWNx8hHuQgo7DNvBD";
        navigator.clipboard.writeText(addr).then(() => {
            alert('Contract address copied: ' + addr);
        });
    }
    window.copyAddr = copyAddr;

    // ---------- COUNTDOWN (CET) ----------
    // Target: 22 Nov 2025 00:00:00 CET (UTC+1)
    const targetISO = '2025-11-22T00:00:00+01:00';
    const targetDate = new Date(targetISO);

    const dEl = document.getElementById('cd-days');
    const hEl = document.getElementById('cd-hours');
    const mEl = document.getElementById('cd-mins');
    const sEl = document.getElementById('cd-secs');
    const bar = document.getElementById('cd-bar');
    const cdWrap = document.getElementById('countdown');

    // For progress bar (from first load → target)
    const firstLoad = new Date();

    function pad(n){ return String(n).padStart(2,'0'); }
    function tick(){
        const now = new Date();
        const diff = Math.max(0, targetDate - now);

        const sec = Math.floor(diff / 1000) % 60;
        const min = Math.floor(diff / (1000*60)) % 60;
        const hr  = Math.floor(diff / (1000*60*60)) % 24;
        const day = Math.floor(diff / (1000*60*60*24));

        if (dEl.textContent !== String(day)) { dEl.textContent = String(day); dEl.style.transform='scale(1.06)'; setTimeout(()=>dEl.style.transform='',160); }
        if (hEl.textContent !== pad(hr))     { hEl.textContent = pad(hr);     hEl.style.transform='scale(1.06)'; setTimeout(()=>hEl.style.transform='',160); }
        if (mEl.textContent !== pad(min))    { mEl.textContent = pad(min);    mEl.style.transform='scale(1.06)'; setTimeout(()=>mEl.style.transform='',160); }
        if (sEl.textContent !== pad(sec))    { sEl.textContent = pad(sec);    sEl.style.transform='scale(1.06)'; setTimeout(()=>sEl.style.transform='',160); }

        // progress (from first load to target)
        const total = Math.max(1, targetDate - firstLoad);
        const done = Math.min(total, now - firstLoad);
        bar.style.width = (done/total)*100 + '%';

        if (diff <= 0) {
            clearInterval(timer);
            cdWrap.querySelector('.cd-title').textContent = "ISO 20022 Launch is LIVE";
            cdWrap.querySelector('.cd-date').textContent = "Welcome to the standards-native payments era.";
            celebrate();
        }
    }
    const timer = setInterval(tick, 1000); tick();

    // ---------- FX Canvas (confetti) ----------
    const canvas = document.getElementById('fxCanvas');
    const ctx = canvas.getContext('2d');
    function resizeFX(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    window.addEventListener('resize', resizeFX); resizeFX();

    function celebrate(){
        const pieces = [];
        const colors = ['#6b4df5','#a86bff','#00d4ff','#ffffff'];
        for (let i=0;i<180;i++){
            pieces.push({
                x: Math.random()*canvas.width,
                y: -20 - Math.random()*canvas.height*0.4,
                w: Math.random()*6+4,
                h: Math.random()*10+6,
                vx: (Math.random()-0.5)*4,
                vy: Math.random()*3+3,
                r: Math.random()*360,
                vr: (Math.random()-0.5)*6,
                a: 1,
                color: colors[i%colors.length]
            });
        }
        let t = 0;
        (function loop(){
            t++;
            ctx.clearRect(0,0,canvas.width,canvas.height);
            pieces.forEach(p=>{
                p.vy += 0.05; // gravity
                p.x += p.vx; p.y += p.vy; p.r += p.vr;
                if (p.y > canvas.height + 20) p.a -= 0.01;
                ctx.save();
                ctx.globalAlpha = Math.max(0, p.a);
                ctx.translate(p.x, p.y); ctx.rotate(p.r*Math.PI/180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
                ctx.restore();
            });
            if (t < 900) requestAnimationFrame(loop);
        })();
    }

    /* === NETWORK BACKGROUND ===============================================*/
    const netCanvas = document.getElementById('netCanvas');
    const nctx = netCanvas.getContext('2d', { alpha: true });

    // Respect reduced motion
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function sizeNet(){
        const dpr = Math.min(2, window.devicePixelRatio || 1);
        netCanvas.width = Math.floor(innerWidth * dpr);
        netCanvas.height = Math.floor(innerHeight * dpr);
        netCanvas.style.width = innerWidth + 'px';
        netCanvas.style.height = innerHeight + 'px';
        nctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    sizeNet(); window.addEventListener('resize', sizeNet);

    function cssVar(name, fallback){
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim() || fallback;
    }
    function getNetColors(){
        const brand  = cssVar('--brand', '#6b4df5');
        const brand2 = cssVar('--brand-2', '#a86bff');
        const brand3 = cssVar('--brand-3', '#00d4ff');
        const muted  = cssVar('--muted', '#a9afc3');
        return { brand, brand2, brand3, muted };
    }

    // World state
    const net = {
        colors: getNetColors(),
        nodes: [],
        links: [],
        packets: [],
        t: 0
    };
    window.net = net; // allow theme callback to tweak colors

    // Build a lightly jittered hex grid for even coverage
    function buildNetwork(){
        net.nodes.length = 0;
        net.links.length = 0;
        net.packets.length = 0;

        const spacing = Math.max(80, Math.min(140, Math.floor(Math.min(innerWidth, innerHeight)/10)));
        const cols = Math.ceil(innerWidth / spacing) + 2;
        const rows = Math.ceil(innerHeight / (spacing * 0.86)) + 2; // ~hex vertical spacing
        const jitter = spacing * 0.25;

        for (let r=0; r<rows; r++){
            for (let c=0; c<cols; c++){
                const x = (c + (r%2?0.5:0)) * spacing + (Math.random()*2-1)*jitter;
                const y = r * spacing * 0.86 + (Math.random()*2-1)*jitter;
                net.nodes.push({
                    x, y,
                    pulse: Math.random()*Math.PI*2,
                    r: 2 + Math.random()*1.5
                });
            }
        }
        // Connect each node to a few nearest neighbors (k=3)
        const k = 3;
        for (let i=0; i<net.nodes.length; i++){
            const a = net.nodes[i];
            if (a.x < -50 || a.x > innerWidth+50 || a.y < -50 || a.y > innerHeight+50) continue;
            const dists = [];
            for (let j=0; j<net.nodes.length; j++){
                if (i===j) continue;
                const b = net.nodes[j];
                const dx = a.x - b.x, dy = a.y - b.y;
                const d2 = dx*dx + dy*dy;
                dists.push([d2, j]);
            }
            dists.sort((m,n)=>m[0]-n[0]);
            for (let n=0; n<k; n++){
                const idx = dists[n]?.[1];
                if (idx==null) continue;
                const j = Math.min(idx, i), i2 = Math.max(idx, i);
                const key = j+'-'+i2;
                if (!net.links.some(l=>l.key===key)){
                    const b = net.nodes[idx];
                    net.links.push({
                        key,
                        a, b,
                        phase: Math.random()*Math.PI*2
                    });
                }
            }
        }
        // Seed a few packets
        if (!reduceMotion){
            for (let p=0; p<Math.min(30, Math.floor(net.links.length/20)); p++){
                spawnPacket();
            }
        }
    }

    function spawnPacket(){
        const link = net.links[Math.floor(Math.random()*net.links.length)];
        if (!link) return;
        const speed = 60 + Math.random()*140; // px/s
        net.packets.push({
            link,
            t: Math.random(),        // position 0..1 along link
            v: (0.25 + Math.random()*0.75) * (Math.random()<0.5?-1:1), // direction +/- with slight variety
            speed
        });
    }

    buildNetwork();
    window.addEventListener('resize', buildNetwork);

    // Drawing helpers
    function lineWidthFade(dist){
        return Math.max(0.4, 1.2 - dist/300);
    }

    function draw(){
        nctx.clearRect(0,0,innerWidth,innerHeight);
        const { brand, brand2, brand3 } = net.colors;

        // Links (breathing)
        net.links.forEach((L)=>{
            const dx = L.b.x - L.a.x, dy = L.b.y - L.a.y;
            const dist = Math.hypot(dx, dy);
            const alpha = 0.12 + 0.08*Math.sin(net.t*0.001 + L.phase);
            nctx.globalAlpha = alpha;
            nctx.lineWidth = lineWidthFade(dist);
            const grad = nctx.createLinearGradient(L.a.x, L.a.y, L.b.x, L.b.y);
            grad.addColorStop(0, brand);
            grad.addColorStop(0.5, brand3);
            grad.addColorStop(1, brand2);
            nctx.strokeStyle = grad;
            nctx.beginPath();
            nctx.moveTo(L.a.x, L.a.y);
            nctx.lineTo(L.b.x, L.b.y);
            nctx.stroke();
        });

        // Nodes (pulsing)
        net.nodes.forEach(N=>{
            const pulse = 0.35 + 0.35*Math.sin(net.t*0.002 + N.pulse);
            nctx.globalAlpha = 0.35 + pulse*0.35;
            nctx.fillStyle = brand3;
            nctx.beginPath();
            nctx.arc(N.x, N.y, N.r + pulse*1.2, 0, Math.PI*2);
            nctx.fill();

            // tiny core
            nctx.globalAlpha = 0.9;
            nctx.fillStyle = '#ffffff';
            nctx.beginPath();
            nctx.arc(N.x, N.y, 0.8, 0, Math.PI*2);
            nctx.fill();
        });

        if (!reduceMotion){
            // Packets moving along links
            net.packets.forEach(P=>{
                const len = Math.hypot(P.link.b.x - P.link.a.x, P.link.b.y - P.link.a.y);
                const dt = 1/60; // approx
                const delta = (P.speed * dt) / Math.max(1, len) * P.v;
                P.t += delta;
                if (P.t < 0 || P.t > 1){
                    Object.assign(P, { link: net.links[Math.floor(Math.random()*net.links.length)] || P.link, t: (P.t+1)%1, v: (Math.random()<0.5?-1:1), speed: 60+Math.random()*140 });
                }
                const x = P.link.a.x + (P.link.b.x - P.link.a.x)*P.t;
                const y = P.link.a.y + (P.link.b.y - P.link.a.y)*P.t;

                // glow trail
                nctx.globalAlpha = 0.9;
                const grad = nctx.createRadialGradient(x, y, 0, x, y, 10);
                grad.addColorStop(0, '#ffffff');
                grad.addColorStop(0.4, brand);
                grad.addColorStop(1, 'transparent');
                nctx.fillStyle = grad;
                nctx.beginPath();
                nctx.arc(x, y, 3.2, 0, Math.PI*2);
                nctx.fill();
            });
        }
    }

    let rafId;
    function loop(ts){
        net.t = ts || 0;
        draw();
        rafId = requestAnimationFrame(loop);
    }
    if (!reduceMotion) {
        loop(0);
    } else {
        // one static draw for reduced motion users
        draw();
    }
    // Clean up on tab hide
    window.addEventListener('visibilitychange', ()=>{
        if (document.hidden) cancelAnimationFrame(rafId); else if (!reduceMotion) rafId = requestAnimationFrame(loop);
    });
</script>
</body>
</html>












